G.MapManager.modes = { dev: 1, easy: 2, normal: 3 };G.MapManager.create = function() {    // Create map manager object.    var mapman = {        currentMap: null,        currentMapNumber: 0,        mode: G.MapManager.modes.normal,        maps: [            G.MapManager.Map1,            G.MapManager.Map2        ]    };        mapman.init = function() {        this.scores = localStorage.scores ? JSON.parse(localStorage.scores) : [];    };        mapman.mapLoading = function() {        $("#GameWindow").hide();        $("#LoadingScreen").show();    };        mapman.loadMap = function(mapnum) {        if(mapnum > this.maps.length) {            console.log("There isn't a map number " + mapnum + "!");            return;        }                // Show loading screen.        this.mapLoading();                // Update map number before loading map, so the map can see what number it is when loading.        this.currentMapNumber = mapnum;                // Load map.        var map = this.maps[mapnum - 1].create();                // Callback when map has finished loading.        map.onReady = function() {            mapman.mapLoaded(map);        };    };        // Restart the current map.    mapman.restartMap = function() {        this.loadMap(this.currentMapNumber);    };        // Called when map has finished loading.    mapman.mapLoaded = function(map) {        this.currentMap = map;                G.activeScene = map.scene;                // Set map title.        G.GameWindow.GUI.showMapTitle(map.title);        G.GameWindow.GUI.setHiScore(map.hiscore.score);        G.chat.system("Map: " + map.title);                // Show game window.        $("#LoadingScreen").hide();        $("#GameWindow").show();                G.updateViewport(G.engine);    };        mapman.quitMap = function() {        // Hide the map win window, and the entire game window.        $("#MapWinWindow").hide();        $("#GameWindow").hide();                // Update the splash screen message.        G.SplashScreen.setMessage();                // Show the splash screen.        $("#SplashScreen").show();                // Dispose the current map.        G.activeScene = null;        this.currentMap.dispose();        this.currentMap = null;    };        // Finish initializing map manager.    mapman.init();        return mapman;};